<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock paper Scissors</title>
    <style>
        body{
            font-family: Arial, Helvetica, sans-serif;
            background-color: black;
        }
        .title{
            color: rgb(255, 255, 254);
            font-weight: bold;
            font-size: 30px;

        }
        .css-in{
            color: rgb(255, 255, 254);
            font-size: 10px;
            font-size: 20px;


        }

        .btn-all{
            background-color: transparent;
            border-color: white;
            height: 120px;
            width: 120px;
            border-radius: 100px;
            font-size: 50px;
            cursor: pointer;
            margin-left: 10px;
            margin-bottom: 30px;
        }
        .move-icon {
            height: 50px;
        }
        .reset-btn,.autoplay-btn{
            margin-top: 20px;
            border: none;
            padding: 10px 15px;
            cursor: pointer;

        }
   .res{
    color: rgb(255, 255, 254);
            font-size: 20px;
            font-size: 20px;
            font-weight: bold;


   }

    </style>
</head>
<body>

    <p class="title">Rock Paper Scissors</p>

    <button class="btn-all js-rock">✊</button>

    <button   class="btn-all js-paper">✋</button>

    <button   class="btn-all js-scissors">✌️</button>
    <br>
    <p class="js-result css-in res"></p>
    <p class="js-moves css-in"></p>
    <p class="js-score css-in"> </p>
    

    <button class="reset-btn">Reset score</button>
    <button class="autoplay-btn">Auto play</button>

    <script>

        const score= JSON.parse(localStorage.getItem('score')) || {
            wins:0,
            losses:0,
            ties:0
        };
       
       onscreen();

        const resetScore=()=>{
            score.wins=0;
            score.losses=0;
            score.ties=0;

             onscreen();
            document.querySelector('.js-result').innerHTML=``;

            document.querySelector('.js-moves').innerHTML=``;
            

        }
        const resetbtn=document.querySelector('.reset-btn');
        resetbtn.addEventListener('click',resetScore);
       

const changetext=()=>{
    const autobtn=document.querySelector('.autoplay-btn');
    if(autobtn.innerHTML==='Auto play'){
        autobtn.innerHTML='Stop Playing';
    }
    else if(autobtn.innerHTML==='Stop Playing'){
        autobtn.innerHTML='Auto play';
    }

}

 let isautoPlaying=false;
       let  intervalid;
        const autoplay=()=>{
            if(!isautoPlaying){
                intervalid= setInterval(function (){
                     userMove=pickComputermove();
                    playGame(userMove);
                },
                1000);
                isautoPlaying=true;
                

            }
            else{
                clearInterval(intervalid);
                isautoPlaying=false;

            }
           
        }
        //12rs

        const autobtn=document.querySelector('.autoplay-btn');
        autobtn.addEventListener('click',changetext);
        autobtn.addEventListener('click',autoplay);

    const rock=document.querySelector('.js-rock');
    rock.addEventListener('click',()=>{
        playGame('rock');
    });
     const paper=document.querySelector('.js-paper');
    paper.addEventListener('click',()=>{
        playGame('paper');
    });
     const scissors=document.querySelector('.js-scissors');
    scissors.addEventListener('click',()=>{
        playGame('Scissors');
    });

    document.body.addEventListener('keydown',(event)=>{
        if(event.key==='r'){
            playGame('rock');

        }
        else if(event.key==='p'){
            playGame('paper');
        }
        else if(event.key==='s'){
            playGame('Scissors');
        }

        else if (event.key==='a'){
            autoplay();
             changetext();
        }
        else if(event.key==='Backspace'){
            resetScore();
           
        }
    });

        

        function playGame(userMove){
        
        const computerValue= pickComputermove();
        let result='';

        if(userMove==='Scissors'){
        if(computerValue==='rock'){
            result='You lost';
        }
        else if(computerValue==='paper'){
            result='You won';
        }
        else if(computerValue==='scissors'){
            result='Tie';
        }
         if(result==='You won'){
            score.wins+=1
        }
        else if(result==='You lost'){
            score.losses+=1

        }
        else if(result==='Tie'){
            score.ties+=1;
        }
        
    }
    else if(userMove==='paper'){
         if(computerValue==='rock'){
            result='You won';
        }
        else if(computerValue==='paper'){
            result='Tie';
        }
        else if(computerValue==='scissors'){
            result='You lost';
        }
        
         if(result==='You won'){
            score.wins+=1
        }
        else if(result==='You lost'){
            score.losses+=1

        }
        else if(result==='Tie'){
            score.ties+=1;
        }
    }
    else if(userMove==='rock'){

        if(computerValue==='rock'){
            result='Tie';
        }
        else if(computerValue==='paper'){
            result='You lost';
        }
        else if(computerValue==='scissors'){
            result='You won';
        }

        if(result==='You won'){
            score.wins+=1
        }
        else if(result==='You lost'){
            score.losses+=1

        }
        else if(result==='Tie'){
            score.ties+=1;
        }

    }





    localStorage.setItem('score' , JSON.stringify(score));
    
    onscreen();

    document.querySelector('.js-result').innerHTML=result;

    document.querySelector('.js-moves').innerHTML=`You
<img src="images/${userMove}-emoji.png" class="move-icon">
<img src="images/${computerValue}-emoji.png" class="move-icon">
Computer`;
        
            
        }

        function onscreen(){
            document.querySelector('.js-score').innerHTML=  `wins :${score.wins},losses:${score.losses},Ties:${score.ties}`;

        }

        
        

         function pickComputermove(){
            let computerValue='';
            const val=Math.random();
        
        if(val>=0 && val <1/3){
            computerValue='rock';

        }
        else if(val>=1/3 && val<2/3){
            computerValue='paper';
        }
        else if(val>=2/3 && val<1){
            computerValue='scissors';
        }

        return computerValue;

         }
    </script>
</body>
</html>